<template>
  <script src="../interact-1.2.4.min.js"></script>
  <div class="flat-mainwindow" style="width: ${node.width}px; height: ${node.height}px;" contextmenu.delegate="onClick($event)">
    <div>${file.meta.name}</div>
    <input type="button" value="New" click.delegate="newFlatNode()"></input>
    <input type="button" value="Undo" click.delegate="undo()"></input>
    <input type="button" value="Redo" click.delegate="redo()"></input>
    <input type="button" value="New Temporary Mosaic" click.delegate="newTemporaryMosaic()"></input>
    <div class="flat-window" id.bind="child" style="left: ${$parent.file.nodes[child].x}px; top: ${$parent.file.nodes[child].y}px; width: ${$parent.file.nodes[child].width}px; height: ${$parent.file.nodes[child].height}px;" repeat.for="child of node.children" contextmenu.delegate="$parent.onWindowClick($event)">
      <span class="flat-titlebar"></span>
      <compose
        class="flat-body"
        model.bind="{'file_id':$parent.file.meta.id, 'root_id':child, 'type': 'online', 'flatVM':$parent}"
        view-model="tree">
      </compose>
    </div>
  </div>
</template>